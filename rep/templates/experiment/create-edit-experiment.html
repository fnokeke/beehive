{% extends "layout.html" %}

{% block title %}
    {{ "Edit Experiment" if experiment else "New Experiment" }}
{% endblock %}


{% block navbar_links %}

    <ul class="nav navbar-nav nav-link-text">
        <li>
            <a href="{{ url_for('experiments') }}">
                <span class="glyphicon glyphicon-chevron-left"></span>
                Go Back
            </a>
        </li>

        {% if experiment %}
            <li class="active">
                <a href="#">
                    <span class="glyphicon glyphicon-hourglass"></span>
                    Experiment [{{ experiment.code }}]
                </a>
            </li>

            <li>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">
                            <span class="glyphicon glyphicon-stats"></span>
                            Dashboards <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu nav-link-text">
                            <li><a href="/participants/experiment/{{ experiment.code }}">
                                <span class="glyphicon glyphicon-user"></span>
                                Participants
                            </a>
                            </li>
                            <li><a href="/app-analytics/experiment/{{ experiment.code }}">
                                <span class="glyphicon glyphicon-phone"></span>
                                App Analytics
                            </a>
                            </li>
                            {% if protocols|length > 0 %}
                                <li><a href="/protocols/experiment/{{ experiment.code }}">
                                    <span class="glyphicon glyphicon-bell"></span>
                                    Protocols
                                </a>
                                </li>
                            {% endif %}
                            {% if experiment and experiment.app_usage %}
                                <li><a href="/app-usage/experiment/{{ experiment.code }}">
                                    <span class="glyphicon glyphicon-equalizer"></span>
                                    App usage
                                </a>
                                </li>
                            {% endif %}
                            {% if experiment and experiment.screen_events %}
                                <li><a href="/screen-events/experiment/{{ experiment.code }}">
                                    <span class="glyphicon glyphicon-modal-window"></span>
                                    Screen events
                                </a>
                                </li>
                            {% endif %}
                            <li role="separator" class="divider"></li>
                            <li><a href="/download/all-data/experiment/{{ experiment.code }}">
                                <span class="glyphicon glyphicon-cloud-download"></span>
                                Download All Data
                            </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>

        {% endif %}

    </ul>

{% endblock %}

{% block contents %}

    <div class="container">

        <div id="newDivId" class="page-header" data-isnew={{ experiment == undefined }}>
            <h3>
                {{ "Edit Experiment" if experiment else "New Experiment" }}
            </h3>
        </div>

        <div class="row">
            <div class="col-xs-3">
                <button type="button" id="step1-basic" class="btn btn-lg btn-block btn-info" onclick="load_slide1()">1.
                    Basic Info
                </button>
            </div>
            <div class="col-xs-3">
                <button type="button" id="step2-data" class="btn btn-lg btn-block" onclick="load_slide2()">2. Data
                    Streams
                </button>
            </div>
            <div class="col-xs-3">
                <button type="button" id="step3-protocols" class="btn btn-lg btn-block" onclick="load_slide3()">3.
                    Protocols
                </button>
            </div>
            <div class="col-xs-3">
                <button type="button" id="step4-preview" class="btn btn-lg btn-block" onclick="load_slide4()">4.
                    Review
                </button>
            </div>
        </div>
        <br>

        <!--##################### slide1 #####################-->
        <div id="slide1" class="noshow">
            <h3>Basic Info</h3>
            <hr class="style5">
            <br>
            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Experiment Title</label>
                <div class="col-xs-8">
                    <input
                            class="form-control"
                            type="text"
                            id="exp-title"
                            value="{{ experiment.title if experiment else '' }}"
                            placeholder="experiment title will be visible to participants"/>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Experiment Label</label>
                <div class="col-xs-8">
                    <input class="form-control"
                           type="text"
                           id="exp-label"
                           value="{{ experiment.label if experiment else '' }}"
                           placeholder="visible to only you"
                    />
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Experiment Description</label>
                <div class="col-xs-8">
                    <input class="form-control"
                           type="text"
                           value="{{ experiment.description if experiment else '' }}"
                           id="exp-description"
                           placeholder="brief summary visible to participants">
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Start Date</label>
                <div class="col-xs-8">
                    <input
                            class="form-control"
                            id="exp-start-date"
                            data-provide="datepicker"
                            data-date-start-date="{{ today_date }}"
                            data-date-format="yyyy-mm-dd"
                            data-date-today-highlight="true"
                            value="{{ experiment.start_date | onlydatefmt if experiment else today_date }}"
                    />
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">End Date</label>
                <div class="col-xs-8">
                    <input
                            class="form-control"
                            id="exp-end-date"
                            data-provide="datepicker"
                            data-date-start-date="{{ today_date }}"
                            data-date-format="yyyy-mm-dd"
                            data-date-today-highlight="true"
                            value="{{ experiment.end_date | onlydatefmt if experiment else today_date }}"
                    />
                </div>
            </div>

            <br/>
            <div class="text-center">
                <button type="button"
                        class="btn btn-primary btn-lg"
                        onclick="load_slide2()">
                    <span> &nbsp &nbsp Next </span>
                    <span class="glyphicon glyphicon-arrow-right"></span>
                    <span> &nbsp &nbsp </span>
                </button>
            </div>

            <br/>
        </div>

        <!--##################### slide2 #####################-->
        <div id="slide2" class="noshow">

            <h3>Data Streams</h3>
            <hr class="style5">
            <br>
            <div class="form-group row">
                <label class="col-md-2 col-form-label">RescueTime</label>
                <div class="col-xs-10">
                    <input
                            type="checkbox"
                            {{ 'checked' if experiment and experiment.rescuetime else '' }}
                            id="exp-rescuetime"
                            data-toggle="toggle"
                            data-on="Yes"
                            data-off="No"
                            data-onstyle="primary"
                            data-offstyle="danger"
                    >
                </div>
            </div>

            <br>
            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Google Calendar</label>
                <div class="col-xs-10">
                    <input
                            type="checkbox"
                            {{ 'checked' if experiment and experiment.calendar else '' }}
                            id="exp-calendar"
                            data-toggle="toggle"
                            data-on="Yes"
                            data-off="No"
                            data-onstyle="primary"
                            data-offstyle="danger"
                    >
                </div>
            </div>
            <br>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Phone Notifications</label>
                <div class="col-xs-10">
                    <input
                            type="checkbox"
                            id="exp-phone-notif"
                            {{ 'checked' if experiment and experiment.phone_notif else '' }}
                            data-toggle="toggle"
                            data-on="Yes"
                            data-off="No"
                            data-onstyle="primary"
                            data-offstyle="danger"
                    >
                </div>
            </div>
            <br>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Screen events</label>
                <div class="col-xs-10">
                    <input
                            type="checkbox"
                            id="exp-screen-events"
                            {{ 'checked' if experiment and experiment.screen_events else '' }}
                            data-toggle="toggle"
                            data-on="Yes"
                            data-off="No"
                            data-onstyle="primary"
                            data-offstyle="danger"
                    >
                </div>
            </div>
            <br>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">App usage</label>
                <div class="col-xs-10">
                    <input
                            type="checkbox"
                            {{ 'checked' if experiment and experiment.app_usage else '' }}
                            id="exp-app-usage"
                            data-toggle="toggle"
                            data-on="Yes"
                            data-off="No"
                            data-onstyle="primary"
                            data-offstyle="danger"
                    >
                </div>
            </div>

            <br/>
            <div class="text-center">
                <button type="button"
                        class="btn btn-primary btn-lg"
                        onclick="load_slide3()">
                    <span> &nbsp &nbsp Next </span>
                    <span class="glyphicon glyphicon-arrow-right"></span>
                    <span> &nbsp &nbsp </span>
                </button>
            </div>
            <br/>
        </div>

        <!--##################### slide3 #####################-->
        <div id="slide3" class="noshow" data-protocols="{{ protocols }}" data-experiment="{{ experiment }}">
            <h3>Protocols</h3>
            <hr class="style5">

            <div class="col-xs-4">
                <button type="button"
                        class="btn btn-primary"
                        id="add-protocol-button"
                        data-toggle="modal"
                        data-target="#add-protocol-modal">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    Add Protocol
                </button>

            </div>

            {% if experiment and protocols %}
                <button type="button"
                        class="btn btn-danger float-i-right"
                        onclick="delete_all_protocols()"
                        data-target="#add-protocol-modal">
                    <span class="glyphicon glyphicon-trash"></span>
                    Delete All
                </button>
            {% endif %}

            <hr>

            <div id="display-protocols">
                <br/>
                <span id="protocols-list-view"></span>
                <span id="protocols-error-view"></span>
                <br/>
            </div>

            <br/>
            <div class="text-center">
                <button type="button"
                        class="btn btn-primary btn-lg"
                        onclick="load_slide4()">
                    <span> &nbsp &nbsp Next </span>
                    <span class="glyphicon glyphicon-arrow-right"></span>
                    <span> &nbsp &nbsp </span>
                </button>
            </div>
            <br/>
        </div>


        <!--##################### slide4 #####################-->
        <div id="slide4" class="noshow">
            <h3>Review & Launch</h3>
            <div>
                Review experiment settings before you approve and create it.
            </div>
            <hr class="style5">


            <!--------------------------- Section 1 --------------------------->

            <div>
                <span class="review-section-title">Basic Info</span>
                <button type="button" onclick="load_slide1()" class="btn btn-info float-i-right">&nbsp; Edit &nbsp;
                </button>
            </div>
            <br>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Title</label>
                <div class="col-xs-8">
                    <input maxlength="120" type="text" id="review-title" class="form-control classname" value="Demo"
                           readonly/>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Label</label>
                <div class="col-xs-8">
                    <input maxlength="120" type="text" id="review-label" class="form-control classname" value="Demo"
                           readonly/>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Description</label>
                <div class="col-xs-8">
                    <input maxlength="250" type="text" id="review-description" class="form-control classname"
                           value="Demo" readonly/>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">Start Date</label>
                <div class="col-xs-8">
                    <input type="text" id="review-start-date" class="form-control classname" value="Demo" readonly/>
                </div>
            </div>

            <div class="form-group row">
                <label class="col-xs-2 col-form-label">End Date</label>
                <div class="col-xs-8">
                    <input type="text" id="review-end-date" class="form-control classname" value="Demo" readonly/>
                </div>
            </div>

            <hr class="style5">

            <!--------------------------- Section 2 --------------------------->
            <div>
                <span class="review-section-title">Data Streams</span>
                <button type="button" onclick="load_slide2()" class="btn btn-info float-i-right">&nbsp; Edit &nbsp;
                </button>
            </div>
            <br>

            <div class="form-group row" id="review-screen-events-btn">
                <label class="col-xs-2 col-form-label">Screen Events</label>
                <button type="button" class="btn btn-primary">&nbsp; ON &nbsp;</button>
            </div>


            <div class="form-group row" id="review-app-usage-btn">
                <label class="col-xs-2 col-form-label">App usage</label>
                <button type="button" class="btn btn-primary">&nbsp; ON &nbsp;</button>
            </div>

            <div id="review-data-streams">
                <br/>
                <span id="review-data-streams-msg"></span>
                <br/>
            </div>
            <hr class="style5">

            <!--------------------------- Section 3 --------------------------->
            <div>
                <span class="review-section-title">Protocols</span>
                <button type="button" onclick="load_slide3()" class="btn btn-info float-i-right">&nbsp; Edit &nbsp;
                </button>
            </div>
            <br>

            <div id="review-protocols">
                <br/>
                <span id="review-protocols-list-view"></span>
                <span id="review-protocols-error-view"></span>
                <br/>
            </div>

            <hr class="style5">

            <!--------------------------- Submit --------------------------->

            <div class="text-center">
                <button type="button"
                        class="btn btn-primary btn-lg"
                        id="create_experiment_btn"
                        onclick="create_experiment_handler()">
                    <span class="glyphicon glyphicon-ok"></span>
                    Launch experiment
                </button>
                <input type="text" class="noshow" value="{{ current_user.email }}" id="exp-owner">

            </div>

            <br>

            <div class="text-center" id="review-experiment-view">
                <span id="review-experiment-success"></span>
                <span id="review-experiment-error"></span>
            </div>

        </div>


        <!--##################### slide5 #####################-->
        <div id="slide5" class="noshow">
            <br/>
            <br/>
            <div class="text-center text-success"><h4> Data submitted successfully. Updating experiment list... </h4>
            </div>
            <br/>
        </div>

        <div>
            <br/>
            <hr/>
        </div>


        <!--##################### Add Protocol Modal  #####################-->
        <div
                class="modal fade"
                tabindex="-1"
                id="add-protocol-modal"
                role="dialog"
                aria-labelledby="myModalLabel">

            <div class="modal-dialog" role="document">
                <div class="modal-content">

                    <div class="modal-header">
                        <h4 class="modal-title">Add Protocol
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h4>
                    </div>

                    <div class="modal-body">
                        <div class="form-group row">
                            <label class="col-xs-2 col-form-label">Label</label>
                            <div class="col-xs-10">
                                <input class="form-control" type="text" placeholder="label to identify the protocol"
                                       id="protocol-label">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-xs-2 col-form-label">Dates</label>
                            <div class="col-xs-10">
                                <div class="input-group input-daterange">
                                    <input
                                            type="text"
                                            id="protocol-start-date"
                                            class="form-control"
                                            placeholder="yyyy-mm-dd"
                                            data-date-start-date="{{ today_date }}"
                                            data-date-today-highlight=true
                                            data-date-format='yyyy-mm-dd'
                                            value="{{ today_date }}">

                                    <div class="input-group-addon">to</div>
                                    <input
                                            type="text"
                                            id="protocol-end-date"
                                            class="form-control"
                                            placeholder="yyyy-mm-dd"
                                            data-date-start-date="{{ today_date }}"
                                            data-date-today-highlight=true
                                            data-date-format='yyyy-mm-dd'
                                            value="{{ today_date }}">
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-xs-2 col-form-label">Frequency</label>
                            <div class="col-xs-10">
                                <select class="form-control" id="protocol-frequency">
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="biweekly">Biweekly</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-xs-2 col-form-label">Method</label>
                            <div class="col-xs-10">
                                <select class="form-control" id="protocol-method">
                                    <option value="none">None</option>
                                    <option value="push_survey">Push survey</option>
                                    <option value="push_notification">Push notification</option>
                                    <option value="vibration_by_phone_usage">Vibrate based on phone usage</option>
                                    <option value="vibration_by_app_usage">Vibrate based on app usage</option>
                                </select>
                            </div>
                        </div>

                        <div id="protocol-push-survey" class="hidden">

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Question/Type</label>
                                <div class="col-xs-10">
                                    {#                                  allows up to 30 pairs (each 50 chars) then 100 char space #}
                                    <textarea maxlength="1600" name="protocol-survey-details"
                                              id="protocol-survey-details"
                                              class="form-control"
                                              cols="20" rows="3" placeholder="e.g. Your age? $1$"></textarea>
                                    <span>
                                        <em class="small">One question/type pair per line. </em>
                                        <br>
                                        <em class="small">Question types: 1-number, 2-text, 3-multichoice.</em>

                                    </span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Notification type</label>
                                <div class="col-xs-5">
                                    <select class="form-control" id="protocol-survey-options-type">
                                        <option value="fixed">Fixed time</option>
                                        <option value="user_window">User window</option>
                                        <option value="sleep_wake">Sleep/Wake</option>
                                    </select>
                                </div>
                            </div>

                            <div id="div-notif-fixed">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <input class="form-control" type="time" name="protocol-survey-fixed-exact-time"
                                               value="12:00:00"
                                               id="protocol-survey-fixed-exact-time">
                                    </div>
                                </div>

                            </div>

                            <div id="div-survey-user-window" class="hidden">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="survey-user-time-options">
                                            <option value="1_hour">1 hour</option>
                                            <option value="2_hour">2 hours</option>
                                            <option value="3_hour">3 hours</option>
                                            <option value="4_hour">4 hours</option>
                                            <option value="5_hour">5 hours</option>
                                            <option value="6_hour">6 hours</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div id="div-survey-sleep-awake" class="hidden">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="survey-sleep-time-options">
                                            <option value="1_hour">1 hour</option>
                                            <option value="2_hour">2 hours</option>
                                            <option value="3_hour">3 hours</option>
                                            <option value="4_hour">4 hours</option>
                                            <option value="5_hour">5 hours</option>
                                            <option value="6_hour">6 hours</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Sleep/Awake</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="protocol-survey-sleep-awake">
                                            <option value="before_sleep">Before sleep</option>
                                            <option value="after_wakeup">After waking-up</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Half notify</label>
                                <div class="col-xs-10">
                                    <div class="material-switch">
                                        <input id="probable-survey-half-notify" name="someSwitchOption001"
                                               type="checkbox"/>
                                        <label for="probable-survey-half-notify" class="label-info"> </label>
                                        &nbsp; &nbsp; (push survey only 50% of the time)
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="protocol-push-notif" class="hidden">

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Title/Content</label>
                                <div class="col-xs-10">
                                    {#                                  allows up to 30 pairs (each 50 chars) then 100 char space #}
                                    <textarea maxlength="1600" name="protocol-notif-details" id="protocol-notif-details"
                                              class="form-control"
                                              cols="20" rows="3" placeholder="e.g. title, content"></textarea>
                                    <span>
                                        <em class="small">one title,content pair per line</em>
                                    </span>
                                </div>
                            </div>

                            {#                            <div class="form-group row">#}
                            {#                                <label class="col-xs-2 col-form-label">Title</label>#}
                            {#                                <div class="col-xs-10">#}
                            {#                                    <input maxlength="15" class="form-control" type="text"#}
                            {#                                           placeholder="title of notification (max: 15 characters)"#}
                            {#                                           id="protocol-notif-title">#}
                            {#                                </div>#}
                            {#                            </div>#}
                            {##}
                            {#                            <div class="form-group row">#}
                            {#                                <label class="col-xs-2 col-form-label">Content</label>#}
                            {#                                <div class="col-xs-10">#}
                            {#                                    <input maxlength="20" class="form-control" type="text"#}
                            {#                                           placeholder="content of notification (max: 20 characters)"#}
                            {#                                           id="protocol-notif-content">#}
                            {#                                </div>#}
                            {#                            </div>#}

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">App ID</label>
                                <div class="col-xs-10">
                                    {#                                    allows up to 5 app id (each 30 chars) #}
                                    <textarea maxlength="150" name="protocol-notif-id" id="protocol-notif-appid"
                                              class="form-control"
                                              cols="20" rows="3" placeholder="e.g. com.facebook.katana"></textarea>
                                    <span>
                                        <em class="small"> one app id per line </em>
                                    </span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Notification type</label>
                                <div class="col-xs-5">
                                    <select class="form-control" id="protocol-options-notif-type">
                                        <option value="fixed">Fixed time</option>
                                        <option value="user_window">User window</option>
                                        <option value="sleep_wake">Sleep/Wake</option>
                                    </select>
                                </div>
                            </div>

                            <div id="div-notif-fixed">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <input class="form-control" type="time" name="protocol-fixed-exact-time"
                                               value="12:00:00"
                                               id="protocol-fixed-exact-time">
                                    </div>
                                </div>

                            </div>

                            <div id="div-notif-user-window" class="hidden">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="notification-user-time-options">
                                            <option value="1_hour">1 hour</option>
                                            <option value="2_hour">2 hours</option>
                                            <option value="3_hour">3 hours</option>
                                            <option value="4_hour">4 hours</option>
                                            <option value="5_hour">5 hours</option>
                                            <option value="6_hour">6 hours</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div id="div-notif-sleep-awake" class="hidden">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="notification-sleep-time-options">
                                            <option value="1_hour">1 hour</option>
                                            <option value="2_hour">2 hours</option>
                                            <option value="3_hour">3 hours</option>
                                            <option value="4_hour">4 hours</option>
                                            <option value="5_hour">5 hours</option>
                                            <option value="6_hour">6 hours</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Sleep/Awake</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="protocol-notif-sleep-awake">
                                            <option value="before_sleep">Before sleep</option>
                                            <option value="after_wakeup">After waking-up</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Half notify</label>
                                <div class="col-xs-10">
                                    <div class="material-switch">
                                        <input id="probable-half-notify" name="someSwitchOption001"
                                               type="checkbox"/>
                                        <label for="probable-half-notify" class="label-info"> </label>
                                        &nbsp; &nbsp; (push notification only 50% of the time)
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="protocol-vibration-phone-usage" class="hidden">

                            <div id="phone-select-time-or-limit">

                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">Time Mode</label>
                                    <div class="col-xs-5">
                                        <select class="form-control" id="phone-app-intv-options">
                                            <option value="phone_option_time_limit">Daily Time Limit</option>
                                            <option value="phone_option_start_end">Start Time to End Time</option>
                                        </select>
                                    </div>
                                </div>

                                <div id="phone-vibrate-limit-based" class="">
                                    <div id="div-vibration-phone-time-limit">
                                        <div class="form-group row">
                                            <label class="col-xs-2 col-form-label">Limit (minutes)</label>
                                            <div class="col-xs-5">
                                                <input class="form-control" type="number" placeholder="e.g. 30"
                                                       id="vibration-phone-time-limit">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="phone-vibrate-time-based">
                                    <div class="form-group row">
                                        <label class="col-xs-2 col-form-label">Time</label>
                                        <div class="col-xs-4">
                                            <div class="input-group input-timerange">
                                                <input class="form-control" type="time" name="protocol-phone-start-time"
                                                       value="12:00:00"
                                                       id="protocol-phone-start-time">
                                                <div class="input-group-addon">to</div>
                                                <input class="form-control" type="time" name="protocol-phone-end-time"
                                                       value="15:00:00"
                                                       id="protocol-phone-end-time">
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>

                            {#                            <div class="form-group row">#}
                            {#                                <label class="col-xs-2 col-form-label">Time</label>#}
                            {#                                <div class="col-xs-10">#}
                            {#                                    <div class="input-group input-timerange">#}
                            {#                                        <input class="form-control" type="time" name="start-time" value="12:00:00"#}
                            {#                                               id="protocol-phone-start-time">#}
                            {#                                        <div class="input-group-addon">to</div>#}
                            {#                                        <input class="form-control" type="time" name="end-time" value="15:00:00"#}
                            {#                                               id="protocol-phone-end-time">#}
                            {#                                    </div>#}
                            {#                                </div>#}
                            {#                            </div>#}

                        </div>

                        <div id="protocol-vibration-app-usage" class="hidden">

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">User Mode</label>
                                <div class="col-xs-10">
                                    <div class="material-switch">
                                        <input id="vibration-user-custom-mode" name="vibrationUserCustomMode"
                                               type="checkbox"/>
                                        <label for="vibration-user-custom-mode" class="label-info"> </label>
                                        &nbsp; &nbsp; (user will choose app, time limit, and intervention mode)
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-xs-2 col-form-label">Intervention Mode</label>
                                <div class="col-xs-5">
                                    <select class="form-control" id="vibration-app-intv-options">
                                        <option value="intv_popup">Pop-up</option>
                                        <option value="intv_vibration">Vibration</option>
                                        <option value="intv_statusbar">Status-bar feedback</option>
                                    </select>
                                </div>
                            </div>


                            <div id="user-non-custom-mode">
                                <div class="form-group row">
                                    <label class="col-xs-2 col-form-label">App ID</label>
                                    <div class="col-xs-5">
                                        <input class="form-control" type="text" placeholder="e.g. com.facebook.katana"
                                               id="protocol-vibration-app-usageid">
                                    </div>
                                </div>

                                <div id="app-select-time-or-limit">

                                    <div class="form-group row">
                                        <label class="col-xs-2 col-form-label">Time Mode</label>
                                        <div class="col-xs-5">
                                            <select class="form-control" id="vibration-app-intv-options">
                                                <option value="app_option_time_limit">Daily Time Limit</option>
                                                <option value="app_option_start_end">Start Time to End Time</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div id="app-vibrate-limit-based" class="">
                                        <div id="div-vibration-app-time-limit">
                                            <div class="form-group row">
                                                <label class="col-xs-2 col-form-label">Limit (minutes)</label>
                                                <div class="col-xs-5">
                                                    <input class="form-control" type="number" placeholder="e.g. 30"
                                                           id="vibration-app-time-limit">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="app-vibrate-time-based">
                                        <div class="form-group row">
                                            <label class="col-xs-2 col-form-label">Time</label>
                                            <div class="col-xs-4">
                                                <div class="input-group input-timerange">
                                                    <input class="form-control" type="time"
                                                           name="protocol-app-start-time"
                                                           value="12:00:00"
                                                           id="protocol-app-start-time">
                                                    <div class="input-group-addon">to</div>
                                                    <input class="form-control" type="time"
                                                           name="protocol-app-end-time"
                                                           value="15:00:00"
                                                           id="protocol-app-end-time">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>

                        </div>


                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" id="create-protocol-btn"
                                onclick="create_protocol_handler()">Create
                        </button>
                    </div>

                </div>
            </div>
        </div>

    </div>

{% endblock %}
